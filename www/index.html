<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Caixa</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="author" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/main.css">
</head>
<body>

	<!-- INÍCIO -->

	<section class="inicio">
		<h1>CAIXA</h1>
		<img src="img/caixa.png">
		<ul>
			<li><button class="venda">Realizar Venda</button></li>
			<li><button class="estoque">Verificar Estoque</button></li>
			<li><button class="historico">Histórico de Vendas</button></li>
		</ul>
	</section>



	<!-- COMPRA -->

	<section class="compra">
		<div class="titulo">
			<button class="voltar">←</button>
			<h2>Produtos</h2>
		</div>
		<div class="containerVenda">
			<ul>
				<li><h1>Macarrão</h1></li>
				<li><h1>Arroz</h1></li>
				<li><h1>Feijão</h1></li>
				<li><h1>Leite</h1></li>
				<li><h1>Tomate</h1></li>
			</ul>
			<ul>
				<li><p>R$<span class="valorMacarrao">4.45</span></p></li>
				<li><p>R$<span class="valorArroz">7.00</span></p></li>
				<li><p>R$<span class="valorFeijao">6.00</span></p></li>
				<li><p>R$<span class="valorLeite">2.30</span></p></li>
				<li><p>R$<span class="valorTomate">5.00</span></p></li>
			</ul>
			<ul class="quantidades">
				<li><p><span class="macarrao">0</span></p></li>
				<li><p><span class="arroz">0</span></p></li>
				<li><p><span class="feijao">0</span></p></li>
				<li><p><span class="leite">0</span></p></li>
				<li><p><span class="tomate">0</span></p></li>
			</ul>
			<ul>
				<li>
					<div>
						<button class="somaMacarrao">+</button>
						<button class="subtracaoMacarrao">-</button>
					</div>
				</li>
				<li>
					<div>
						<button class="somaArroz">+</button>
						<button class="subtracaoArroz">-</button>
					</div>
				</li>
				<li>
					<div>
						<button class="somaFeijao">+</button>
						<button class="subtracaoFeijao">-</button>
					</div>
				</li>
				<li>
					<div>
						<button class="somaLeite">+</button>
						<button class="subtracaoLeite">-</button>
					</div>
				</li>
				<li>
					<div>
						<button class="somaTomate">+</button>
						<button class="subtracaoTomate">-</button>
					</div>
				</li>
			</ul>
		</div>
		<ul class="total">
			<li><h3>TOTAL</h3></li>
			<li><p>R$</p></li>
			<li><div><h4>0.00</h4></div></li>
			<li><button class="vender">Vender</button></li>
		</ul>
	</section>




	<!-- ESTOQUE -->

	<section class="estoque">
		<div class="tituloEstoque">
			<button class="voltar">←</button>
			<h2>Estoque</h2>
		</div>
		<div class="containerEstoque">
			<ul>
				<li><h1>Macarrão</h1></li>
				<li><h1>Arroz</h1></li>
				<li><h1>Feijão</h1></li>
				<li><h1>Leite</h1></li>
				<li><h1>Tomate</h1></li>
			</ul>
			<ul>
				<li><p>R$<span class="valorMacarrao">4.45</span></p></li>
				<li><p>R$<span class="valorArroz">7.00</span></p></li>
				<li><p>R$<span class="valorFeijao">6.00</span></p></li>
				<li><p>R$<span class="valorLeite">2.30</span></p></li>
				<li><p>R$<span class="valorTomate">5.00</span></p></li>
			</ul>
			<ul>
				<li><p><span class="macarrao">5</span></p></li>
				<li><p><span class="arroz">8</span></p></li>
				<li><p><span class="feijao">10</span></p></li>
				<li><p><span class="leite">7</span></p></li>
				<li><p><span class="tomate">4</span></p></li>
			</ul>
			<ul>
				<li><button class="somaMacarrao">+</button></li>
				<li><button class="somaArroz">+</button></li>
				<li><button class="somaFeijao">+</button></li>
				<li><button class="somaLeite">+</button></li>
				<li><button class="somaTomate">+</button></li>
			</ul>
		</div>
	</section>

	<!-- HISTÓRICO -->

	<section class="historico">
		<div class="tituloHistorico">
			<button class="voltar">←</button>
			<h2>Histórico</h2>
		</div>
		<div class="containerHistorico">
		<ul class="codigos">
			<li class="legenda"><h1>Compra</h1></li>
			<li><p>1</p></li>
		</ul>
		<ul class="totais">
			<li class="legenda"><p>Valor(R$)</p></li>
			<li><p>10.00</p></li>
		</ul>
		<ul class="datas">
			<li class="legenda">Data</li>
			<li class="primeiro"><p>19/08/2018<br>15:30:10</p></li>
		</ul>
		<ul class="itens">
			<li class="legenda"><p>Ítens</p></li>
			<li><img class="1" src="img/carrinho.png"></li>
		</ul>
		</div>
		<div class="info">
			<div>
			<ul>
				<li><h1>Macarrão</h1></li>
				<li><h1>Arroz</h1></li>
				<li><h1>Feijão</h1></li>
				<li><h1>Leite</h1></li>
				<li><h1>Tomate</h1></li>
			</ul>
			<ul>
				<li><p><span class="macarrao">0</span></p></li>
				<li><p><span class="arroz">0</span></p></li>
				<li><p><span class="feijao">0</span></p></li>
				<li><p><span class="leite">0</span></p></li>
				<li><p><span class="tomate">0</span></p></li>
			</ul>
			<ul>
				<li><p>R$<span class="totalMacarrao">0</span></p></li>
				<li><p>R$<span class="totalArroz">0</span></p></li>
				<li><p>R$<span class="totalFeijao">0</span></p></li>
				<li><p>R$<span class="totalLeite">0</span></p></li>
				<li><p>R$<span class="totalTomate">0</span></p></li>
			</ul>
			</div>
		</div>
	</section>

<script src="js/jquery-3.3.1.min.js"></script>
<script>
	botaoVenda=$('.venda');
	botaoVoltar=$('button.voltar');
	telaInicio=$('.inicio');
	telaVenda=$('.compra');
	acaoVenda=$('.compra button');
	acaoEstoque=$('.estoque button');
	total = $('.total h4');
	telaEstoque=$('section.estoque');
	botaoEstoque=$('button.estoque');
	telaHistorico=$('section.historico');
	botaoHistorico=$('button.historico');
	vender=$('.vender');
	compraMacarrao=$(".compra .macarrao");
	compraArroz=$(".compra .arroz");
	compraFeijao=$(".compra .feijao");
	compraLeite=$(".compra .leite");
	compraTomate=$(".compra .tomate");
	valorMacarrao=$(".compra .valorMacarrao");
	valorArroz=$(".compra .valorArroz");
	valorFeijao=$(".compra .valorFeijao");
	valorLeite=$(".compra .valorLeite");
	valorTomate=$(".compra .valorTomate");
	estoqueMacarrao=$(".estoque .macarrao");
	estoqueArroz=$(".estoque .arroz");
	estoqueFeijao=$(".estoque .feijao");
	estoqueLeite=$(".estoque .leite");
	estoqueTomate=$(".estoque .tomate");
	carrinho=$(".itens");
	info=$(".info");
	var codigoVenda=1;
	var botao = new Audio("audio/botao.mp3");
	var registradora = new Audio("audio/registradora.mp3");

	$("button").on("click",function(){
		botao.play();
	});

	$(".inicio img").on("click",function(){
		registradora.pause();
		registradora.currentTime = 0;
		registradora.play();
	});

	botaoVenda.on("click", function(){
		telaInicio.hide();
		telaVenda.show();
	});

	botaoEstoque.on("click", function(){
		telaInicio.hide();
		telaEstoque.show();
	});

	botaoHistorico.on("click", function(){
		telaInicio.hide();
		telaHistorico.show();
	});

	botaoVoltar.on("click", function(){
		telaVenda.hide();
		telaEstoque.hide();
		telaHistorico.hide();
		telaInicio.show();
		$(".quantidades span").text(0);
		total.text("0.00");
	});

	function valores(adicao,estoque,valor,operacao){
		if (operacao=="soma" && parseInt(adicao.text())<parseInt(estoque.text())) {
			adicao.text(parseInt(adicao.text())+1);
			total.text((parseFloat(total.text())+parseFloat(valor.text())-0.001).toFixed(2));
		} else if (operacao=="subtracao" && parseInt(adicao.text())>0){
			adicao.text(parseInt(adicao.text())-1);
			total.text((parseFloat(total.text())-parseFloat(valor.text())+0.001).toFixed(2));
		}
	};


	acaoVenda.on("click",function(){
		if ($(this).hasClass("somaMacarrao")) {
			valores(compraMacarrao,estoqueMacarrao,valorMacarrao,"soma");
		} else if ($(this).hasClass("somaArroz")) {
			valores(compraArroz,estoqueArroz,valorArroz,"soma");
		} else if ($(this).hasClass("somaFeijao")) {
			valores(compraFeijao,estoqueFeijao,valorFeijao,"soma");
		} else if ($(this).hasClass("somaLeite")) {
			valores(compraLeite,estoqueLeite,valorLeite,"soma");
		} else if ($(this).hasClass("somaTomate")) {
			valores(compraTomate,estoqueTomate,valorTomate,"soma");
		} else if ($(this).hasClass("subtracaoMacarrao")) {
			valores(compraMacarrao,estoqueMacarrao,valorMacarrao,"subtracao");
		} else if ($(this).hasClass("subtracaoArroz")) {
			valores(compraArroz,estoqueArroz,valorArroz,"subtracao");
		} else if ($(this).hasClass("subtracaoFeijao")) {
			valores(compraFeijao,estoqueFeijao,valorFeijao,"subtracao");
		} else if ($(this).hasClass("subtracaoLeite")) {
			valores(compraLeite,estoqueLeite,valorLeite,"subtracao");
		} else if ($(this).hasClass("subtracaoTomate")) {
			valores(compraTomate,estoqueTomate,valorTomate,"subtracao");
		}
	});

	acaoEstoque.on("click",function(){
		if ($(this).hasClass("somaMacarrao")) {
			estoqueMacarrao.text(parseInt(estoqueMacarrao.text())+1);
		} else if ($(this).hasClass("somaArroz")) {
			estoqueArroz.text(parseInt(estoqueArroz.text())+1);
		} else if ($(this).hasClass("somaFeijao")) {
			estoqueFeijao.text(parseInt(estoqueFeijao.text())+1);
		} else if ($(this).hasClass("somaLeite")) {
			estoqueFeijao.text(parseInt(estoqueFeijao.text())+1);
		} else if ($(this).hasClass("somaTomate")) {
			estoqueTomate.text(parseInt(estoqueTomate.text())+1);
		}
	});

	var itens=[[0,0,0,0,2]];
	vender.on("click",function(){
		if(parseInt(total.text())!=0){
		registradora.pause();
		registradora.currentTime = 0;
		registradora.play();
		telaVenda.hide();
		telaInicio.show();
		estoqueMacarrao.text(parseInt(estoqueMacarrao.text())-parseInt(compraMacarrao.text()));
		estoqueArroz.text(parseInt(estoqueArroz.text())-parseInt(compraArroz.text()));
		estoqueFeijao.text(parseInt(estoqueFeijao.text())-parseInt(compraFeijao.text()));
		estoqueLeite.text(parseInt(estoqueLeite.text())-parseInt(compraLeite.text()));
		estoqueTomate.text(parseInt(estoqueTomate.text())-parseInt(compraTomate.text()));
		codigoVenda++;
		$(".codigos").append("<li>"+codigoVenda+"</li>");
		
		$(".totais").append("<li>"+total.text()+"</li>");
		
		itens.push([parseInt(compraMacarrao.text()),parseInt(compraArroz.text()),parseInt(compraFeijao.text()),parseInt(compraLeite.text()),parseInt(compraTomate.text())]);
			console.log(itens)
		$(".quantidades span").text(0);
		total.text("0.00");

		var data = new Date();
		var mes = data.getMonth()+1;
		var dia = data.getDate();
		var dataAtual = (dia<10 ? '0' : '') + dia + '/' +(mes<10 ? '0' : '') + mes + '/' +data.getFullYear();
		var horario = (data.getHours() + ":" + data.getMinutes() + ":" + data.getSeconds());
		$(".datas").append("<li><p>"+dataAtual+"<br>"+horario+"</p></li>");
		$(".itens").append("<li><img class='"+codigoVenda+"' src='img/carrinho.png'></li>");
		};
	});

	carrinho.on("click","img",function(){
		botao.play();
		$("div.info .macarrao").text(parseInt(itens[parseInt($(this).attr("class"))-1][0]));
		$("div.info .arroz").text(parseInt(itens[parseInt($(this).attr("class"))-1][1]));
		$("div.info .feijao").text(parseInt(itens[parseInt($(this).attr("class"))-1][2]));
		$("div.info .leite").text(parseInt(itens[parseInt($(this).attr("class"))-1][3]));
		$("div.info .tomate").text(parseInt(itens[parseInt($(this).attr("class"))-1][4]));
		$("div.info .totalMacarrao").text((parseFloat($("div.info .macarrao").text())*parseFloat(valorMacarrao.text())).toFixed(2));
		$("div.info .totalArroz").text((parseFloat($("div.info .arroz").text())*parseFloat(valorArroz.text())).toFixed(2));
		$("div.info .totalFeijao").text((parseFloat($("div.info .feijao").text())*parseFloat(valorFeijao.text())).toFixed(2));
		$("div.info .totalLeite").text((parseFloat($("div.info .leite").text())*parseFloat(valorLeite.text())).toFixed(2));
		$("div.info .totalTomate").text((parseFloat($("div.info .tomate").text())*parseFloat(valorTomate.text())).toFixed(2));
		info.fadeIn();
	});

	$("div.info").on("click",function(){
		info.fadeOut();
	});
</script>
</body>
</html>